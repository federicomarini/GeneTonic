<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Happy hour! — happy_hour • GeneTonic</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Happy hour! — happy_hour"><meta property="og:description" content="Start the happy hour, creating a report containing a document full of goodies
derived from the provided objects."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GeneTonic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/GeneTonic_manual.html">The `GeneTonic` User's Guide
</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/federicomarini/GeneTonic" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Happy hour!</h1>
    <small class="dont-index">Source: <a href="https://github.com/federicomarini/GeneTonic/blob/HEAD/R/happy_hour.R" class="external-link"><code>R/happy_hour.R</code></a></small>
    <div class="hidden name"><code>happy_hour.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Start the happy hour, creating a report containing a document full of goodies
derived from the provided objects.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">happy_hour</span><span class="op">(</span>
  <span class="va">dds</span>,
  <span class="va">res_de</span>,
  <span class="va">res_enrich</span>,
  <span class="va">annotation_obj</span>,
  gtl <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">project_id</span>,
  <span class="va">mygenesets</span>,
  <span class="va">mygenes</span>,
  mygroup <span class="op">=</span> <span class="cn">NULL</span>,
  usage_mode <span class="op">=</span> <span class="st">"batch_mode"</span>,
  input_rmd <span class="op">=</span> <span class="cn">NULL</span>,
  output_file <span class="op">=</span> <span class="st">"my_first_GeneTonic_happyhour.html"</span>,
  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
  output_format <span class="op">=</span> <span class="cn">NULL</span>,
  force_overwrite <span class="op">=</span> <span class="cn">FALSE</span>,
  knitr_show_progress <span class="op">=</span> <span class="cn">FALSE</span>,
  ignore_pandoc <span class="op">=</span> <span class="cn">FALSE</span>,
  open_after_creating <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dds</dt>
<dd><p>A <code>DESeqDataSet</code> object, normally obtained after running your data
through the <code>DESeq2</code> framework.</p></dd>


<dt>res_de</dt>
<dd><p>A <code>DESeqResults</code> object. As for the <code>dds</code> parameter, this is
also commonly used in the <code>DESeq2</code> framework.</p></dd>


<dt>res_enrich</dt>
<dd><p>A <code>data.frame</code> object, storing the result of the functional
enrichment analysis. See <code><a href="GeneTonic.html">GeneTonic()</a></code> for the formatting requirements.</p></dd>


<dt>annotation_obj</dt>
<dd><p>A <code>data.frame</code> object with the feature annotation
information, with at least two columns, <code>gene_id</code> and <code>gene_name</code>. See
<code><a href="GeneTonic.html">GeneTonic()</a></code> for the formatting requirements.</p></dd>


<dt>gtl</dt>
<dd><p>A <code>GeneTonic</code>-list object, containing in its slots the arguments
specified above: <code>dds</code>, <code>res_de</code>, <code>res_enrich</code>, and <code>annotation_obj</code> - the names
of the list <em>must</em> be specified following the content they are expecting</p></dd>


<dt>project_id</dt>
<dd><p>A character string, which can be considered as an identifier
for the set/session, and will be e.g. used in the title of the report created
via <code>happy_hour()</code></p></dd>


<dt>mygenesets</dt>
<dd><p>A vector of character strings, containing the genesets to
focus on in the report - for each geneset, e.g. a signature heatmap can be
created.</p></dd>


<dt>mygenes</dt>
<dd><p>A vector of character strings, containing the genes to focus on
in the report - for each gene, the plot of the expression values is included.</p></dd>


<dt>mygroup</dt>
<dd><p>A character string, or a vector thereof. Contains the experimental
variables to be used to split into groups the expression data, and color
accordingly.</p></dd>


<dt>usage_mode</dt>
<dd><p>A character string, which controls the behavior of the Rmd
document, based on whether the rendering is triggered while using the app
("shiny_mode"), or offline, in batch mode. Defaults to "batch_mode".</p></dd>


<dt>input_rmd</dt>
<dd><p>Character string with the path to the RMarkdown (.Rmd) file
that will be used as the template for generating the report. Defaults to NULL,
which will then use the one provided with the <code>GeneTonic</code> package.</p></dd>


<dt>output_file</dt>
<dd><p>Character string, specifying the file name of the output
report. The file name extension must be either <code>.html</code> or <code>.pdf</code>, and consistent
with the value of <code>output_format</code>.</p></dd>


<dt>output_dir</dt>
<dd><p>Character, defining the path to the output directory where
the report will be generated. Defaults to the temp directory (<code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>).</p></dd>


<dt>output_format</dt>
<dd><p>The format of the output report. Either <code>html_document</code>
or <code>pdf_document</code>. The file name extension of <code>output_file</code> must be consistent
with this choice. Can also be left empty and determined accordingly.</p></dd>


<dt>force_overwrite</dt>
<dd><p>Logical, whether to force overwrite an existing report
with the same name in the output directory. Defaults to FALSE.</p></dd>


<dt>knitr_show_progress</dt>
<dd><p>Logical, whether to display the progress of <code>knitr</code>
while generating the report. Defaults to FALSE.</p></dd>


<dt>ignore_pandoc</dt>
<dd><p>Logical, controlling how the report generation function
will behave if <code>pandoc</code> or <code>pandoc-citeproc</code> are missing.</p></dd>


<dt>open_after_creating</dt>
<dd><p>Logical, whether to open the report in the default
browser after being generated. Defaults to TRUE.</p></dd>


<dt>...</dt>
<dd><p>Other arguments that will be passed to <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Generates a fully fledged report in the <code>output_dir</code> directory, called
<code>output_file</code> and returns (invisibly) the name of the generated report.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>When <code>happy_hour</code> is called, a RMarkdown template file will be copied
into the output directory, and <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> will be called to
generate the final report.</p>
<p>As a default template, <code>happy_hour</code> uses the one delivered together with the
<code>GeneTonic</code> package, which provides a comprehensive overview of what the user
can extract. Experienced users can take that as a starting point to further
edit and customize.</p>
<p>If there is already a .Rmd file with the same name in the output directory,
the function will raise an error and stop, to avoid overwriting the existing
file. The reason for this behaviour is that the copied template in the output
directory will be deleted once the report is generated.</p>
<p>Credits to the original implementation proposed by Charlotte Soneson,
upon which this function is <strong>heavily</strong> inspired.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="GeneTonic.html">GeneTonic()</a></code>, <code><a href="shake_topGOtableResult.html">shake_topGOtableResult()</a></code>, <code><a href="shake_enrichResult.html">shake_enrichResult()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"macrophage"</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/mikelove/DESeq2" class="external-link">"DESeq2"</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"org.Hs.eg.db"</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://bioconductor.org/packages/AnnotationDbi" class="external-link">"AnnotationDbi"</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># dds object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"gse"</span>, package <span class="op">=</span> <span class="st">"macrophage"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dds_macrophage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/DESeq2/man/DESeqDataSet.html" class="external-link">DESeqDataSet</a></span><span class="op">(</span><span class="va">gse</span>, design <span class="op">=</span> <span class="op">~</span> <span class="va">line</span> <span class="op">+</span> <span class="va">condition</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> using counts and average transcript lengths from tximeta</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">15</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dds_macrophage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/dge.html" class="external-link">estimateSizeFactors</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> using 'avgTxLength' from assays(dds), correcting for library size</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># annotation object</span></span>
<span class="r-in"><span class="va">anno_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  gene_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span>,</span>
<span class="r-in">  gene_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/AnnotationDbi/man/AnnotationDb-class.html" class="external-link">mapIds</a></span><span class="op">(</span><span class="va">org.Hs.eg.db</span>,</span>
<span class="r-in">    keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span>,</span>
<span class="r-in">    column <span class="op">=</span> <span class="st">"SYMBOL"</span>,</span>
<span class="r-in">    keytype <span class="op">=</span> <span class="st">"ENSEMBL"</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span class="r-in">  row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dds_macrophage</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'select()' returned 1:many mapping between keys and columns</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># res object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">res_de_macrophage</span>, package <span class="op">=</span> <span class="st">"GeneTonic"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res_de</span> <span class="op">&lt;-</span> <span class="va">res_macrophage_IFNg_vs_naive</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># res_enrich object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">res_enrich_macrophage</span>, package <span class="op">=</span> <span class="st">"GeneTonic"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res_enrich</span> <span class="op">&lt;-</span> <span class="fu"><a href="shake_topGOtableResult.html">shake_topGOtableResult</a></span><span class="op">(</span><span class="va">topgoDE_macrophage_IFNg_vs_naive</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Found 500 gene sets in `topGOtableResult` object.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Converting for usage in GeneTonic...</span>
<span class="r-in"><span class="va">res_enrich</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_aggrscores.html">get_aggrscores</a></span><span class="op">(</span><span class="va">res_enrich</span>, <span class="va">res_de</span>, <span class="va">anno_df</span><span class="op">)</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">happy_hour</span><span class="op">(</span></span>
<span class="r-in">  dds <span class="op">=</span> <span class="va">dds_macrophage</span>,</span>
<span class="r-in">  res_de <span class="op">=</span> <span class="va">res_de</span>,</span>
<span class="r-in">  res_enrich <span class="op">=</span> <span class="va">res_enrich</span>,</span>
<span class="r-in">  annotation_obj <span class="op">=</span> <span class="va">anno_df</span>,</span>
<span class="r-in">  project_id <span class="op">=</span> <span class="st">"examplerun"</span>,</span>
<span class="r-in">  mygroup <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span class="r-in">  <span class="co"># mygroup = "line",   # alternatively</span></span>
<span class="r-in">  mygenesets <span class="op">=</span> <span class="va">res_enrich</span><span class="op">$</span><span class="va">gs_id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">11</span>, <span class="fl">31</span><span class="op">)</span><span class="op">]</span>,</span>
<span class="r-in">  mygenes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">"ENSG00000125347"</span>,</span>
<span class="r-in">    <span class="st">"ENSG00000172399"</span>,</span>
<span class="r-in">    <span class="st">"ENSG00000137496"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://federicomarini.github.io" class="external-link">Federico Marini</a>, Annekathrin Ludt.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

